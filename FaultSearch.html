<!DOCTYPE html>
<html lang="en">
<head>
    <title>Search</title>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="stylesheet.css">
    <script src="functionality.js"></script>
    <script src="https://kit.fontawesome.com/0692233908.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Side Bar Controls -->
    <!-- Search Bar -->
    <div class="searchBar">
        <span>
            <h2>Search</h2>
            <p id="tip-text2">Click on the magnifying glass to search.</p>
            <button onmouseover="popUpHover2()" id="searchBtn" class="searchBtn" onclick="searchOpen()"><i class="fa-solid fa-magnifying-glass"></i></button>
        </span>

        <form name="searchForm" id="searchForm" class="searchForm" onsubmit="return false">
            <div class="formDiv">
                <label for="buildingInput" id="buildingInputLabel">Building: </label>
                <input type="text" class="searchFormInput" id="buildingInput" name="buildingInput" list="buildingList" onchange=roomSuggestion()>
            </div>
            <br id="buildingInputBreak">
            <div class="formDiv">
                <label for="roomInput" id="roomInputLabel">Room: </label>
                <input type="text" class="searchFormInput" id="roomInput" name="roomInput" list="roomList">
            </div>
            <br id="roomInputBreak">
            <div class="formDiv">
                <label for="floorInput" id="floorInputLabel">Floor: </label>
                <input type="text" class="searchFormInput" id="floorInput" name="floorInput">
            </div>
            <br id="floorInputBreak">
            <div class="formDiv">
                <label for="faultIdInput" id="faultIdInputLabel">Fault ID: </label>
                <input type="text" class="searchFormInput" id="faultIdInput" name="faultIdInput">
            </div>
            <br id="faultIdInputBreak">
            <div class="formDiv">
                <label for="assignedInput" id="assignedInputLabel">Assigned: </label>
                <input type="text" class="searchFormInput" id="assignedInput" name="assignedInput">
            </div>
            <br id="assignedInputBreak">
            <div class="formDiv">
                <label for="statusInput" id="statusInputLabel">Status: </label>
                <input type="text" class="searchFormInput" id="statusInput" name="statusInput" list="statusList">
            </div>
            <br id="statusInputBreak">
            <div class="formDiv">
                <label for="typeInput" id="typeInputLabel">Type: </label>
                <input type="text" class="searchFormInput" id="typeInput" name="typeInput" list="typeList">
            </div>
            <br id="typeInputBreak">
            <div class="formDiv">
                <label for="fromDateInput" id="fromDateInputLabel">Date (from): </label>
                <input type="date" class="searchFormInput" id="fromDateInput" name="dateInput">
            </div>
            <br id="fromDateInputBreak">
            <div class="formDiv">
                <label for="toDateInput" id="toDateInputLabel">Date (to): </label>
                <input type="date" class="searchFormInput" id="toDateInput" name="dateInput">
            </div>
            <br id="toDateInputBreak">
            <br>
            <button class="searchButton">Search</button>
            <button class="clearButton" onclick=clearSearchForm()>Clear</button>
        </form>
        <br><br>
        <button class="settingsBtn" onclick="openSettings()"><i class="fa-solid fa-gear" style="font-size:50px"></i></button>
        <button class="profileBtn" onclick="openProfileChange()" ><i class="fa-solid fa-user" style="font-size:50px"></i></button>

        <!-- Fault Logging--->
        <div class="faultLogging">
            <button class="logFaultBtn"  onclick="openFaultForm()">Log Fault</button>
            <button class="viewFaultBtn" onclick="viewMyFaults()">View My Faults</button>
        </div>
    </div>

    <!-- Fault Form -->
    <div class="faultForm" id="faultForm">
        <form class="form-container">
            <span class="close" onclick="closeForm()">&times;</span>
            <h1>Report a Fault:</h1>

            <label for="date"><b>Date:</b></label>
            <input type="date" id="todaysDate" name="fault-date" placeholder="todaysDate" value="todaysDate" min="todaysDate" required>
            <br>
            <label for="time"><b>Time:</b></label>
            <input type="time" name="time" required>
            <br>
            <label for="building"><b>Building:</b></label>
            <select name="building" id="building" required>
                <option value="">Please select a Building</option>
                <option value="ARTS 1">ARTS 1 - Arts Building 1</option>
                <option value="ARTS 2">ARTS 2 - Arts Building 2</option>
                <option value="BDS">BDS - Blackdale Building</option>
                <option value="C.HALL">C.HALL - Congregation Hall</option>
                <option value="MUS">MUS - Music Centre</option>
                <option value="DRA">DRA - Drama Studio</option>
            </select>
            <br>
            <label for="room"><b>Room:</b></label>
            <input type="text" name="room"  placeholder='Enter Room number here...' required>
            <br>
            <label for="fault-type"><b>Fault Type:</b></label>
            <select name="fault-type" id="fault-type" required>
                <option value="">Please select a fault type</option>
                <option value="furniture">Furniture</option>
                <option value="electrical">Electrical</option>
                <option value="lighting">Lighting</option>
                <option value="plumbing">Plumbing</option>
                <option value="structural">Structural</option>
                <option value="desktop">Desktop (including peripherals)</option>
            </select>
            <br>
            <div class="img-upload">
                <p id="tip-text">Click on the paperclip to upload.</p>
                <label for="file-input"><b>Image:</b> <br>
                    <img id="PrevImg" onmouseover="popUpHover()" src="resources/attachmentIcon.png" style="width: 50px; height: 50px" alt="Click here to upload an image"/>
                </label>
                <input id="file-input" type="file" onchange="previewImg(this);" style="display: none;">
            </div>
            <br>
            <label for="details"><b>Details:</b></label>
            <textarea id="text-area" form="form-container" placeholder='Enter details here...' rows="4"></textarea>

            <button type="submit" class="btn">Save</button>
            <button type="button" class="btn cancel" onclick="closeForm()">Cancel</button>
        </form>
    </div>

    <div class="profileChange" id="profileChange">
        <span class="close" onclick="closeProfileChange()">&times;</span>
        <h1>Change profile view</h1>
        <table class="changeTable" style="width:75%">
            <tr>
                <td><button class="profile" onclick="swapToStudent()">Students / Staff</button></td>
                <td><button class="profile" onclick="swapToEngineer()">Engineers</button></td>
                <td><button class="profile" onclick="swapToAdmin()">Administrators</button></td>
            </tr>
        </table>
    </div>



    <!-- Main Window / Results Controls -->
    <div class="mainWindow">
        <h2>Results: </h2>
        <span class="sortBar">
            <label for="sortInput">Sort by: </label>
            <select id="sortInput">
                <option>Fault ID</option>
                <option>Date</option>
                <option>Assigned to</option>
            </select>
        </span><br><br>


        <table role="presentation">
            <tr id="1listing" class="listing">
                <td class="imgTd"><img src="resources/chairbroke.jpg" alt="broken chair"></td>
                <td class="textTd">Fault ID: <p>354684</p><br>Building: <p>JSC - Julian Study Centre</p><br>Room: <p>3.02</p></td>
                <td class="textTd">Fault Type: <p>Furniture</p><br>Date: <p>01/11/2022</p><br>Assigned To: <p id="1assigned">Kirsten Fickstings</p><br>Status: <p>Low Priority</p></td>
                <td class="buttonTd">
                    <button onclick="editForm(1)" id="1editButton" class="popupButton">Edit Job</button><br>
                    <button onclick="assignForm(1)" id="1assignButton" class="popupButton">Assign Job</button><br>
                    <button onclick="updateForm(1)" id="1updateButton" class="popupButton">Update Job</button><br>
                    <button onclick="dropDown(1)" id="1dropDownButton" class="popupButton">DropDown</button><br>
                </td>
            </tr>
            <tr id="1dropDown" class="dropdown">
                <td colspan = 2>Details: <br>
                    <p>Chair needs two new wheels fitting, awaiting delivery.</p></td>
                <td colspan = 2>Updates: <br>
                    <p id="1updates">02/11/2022: new wheels ordered. <br>
                    05/11/2022: wheels fitted.</p>
                </td>
            </tr>

            <tr id="2listing" class="listing">
                <td class="imgTd"><img src="resources/waterstain.jpg" alt="broken chair"></td>
                <td class="textTd">Fault ID: <p>354689</p><br>Building: <p>TPSC - Thomas Paine Study Centre</p><br>Room: <p>1.01</p></td>
                <td class="textTd">Fault Type: <p>Plumbing</p><br>Date: <p>08/11/2022</p><br>Assigned To: <p id="2assigned">Kirsten Fickstings</p><br>Status: <p>High Priority</p></td>
                <td class="buttonTd">
                    <button onclick="editForm(2)" id="2editButton" class="popupButton">Edit Job</button><br>
                    <button onclick="assignForm(2)" id="2assignButton" class="popupButton">Assign Job</button><br>
                    <button onclick="updateForm(2)" id="2updateButton" class="popupButton">Update Job</button><br>
                    <button onclick="dropDown(2)" id="2dropDownButton" class="popupButton">DropDown</button><br>
                </td>
            </tr>
            <tr id="2dropDown" class="dropdown">
                <td colspan = 2>Details: <br>
                    <p>Leak in ceiling.</p></td>
                <td colspan = 2>Updates: <br>
                    <p id="2updates">10/11/2022: new pipe fixture needed, awaiting delivery.<br></p>
                </td>
            </tr>

            <tr id="3listing" class="listing">
                <td class="imgTd"><img src="" alt="No image supplied"></td>
                <td class="textTd">Fault ID: <p>354702</p><br>Building: <p>NEWSCI - New Science Building</p><br>Room: <p>0.02</p></td>
                <td class="textTd">Fault Type: <p>Electrical</p><br>Date: <p>01/12/2022</p><br>Assigned To: <p id="3assigned">Joe Hear</p><br>Status: <p>Unassigned</p></td>
                <td class="buttonTd">
                    <button onclick="editForm(3)" id="3editButton" class="popupButton">Edit Job</button><br>
                    <button onclick="assignForm(3)" id="3assignButton" class="popupButton">Assign Job</button><br>
                    <button onclick="updateForm(3)" id="3updateButton" class="popupButton">Update Job</button><br>
                    <button onclick="dropDown(3)" id="3dropDownButton" class="popupButton">DropDown</button><br>
                </td>
            </tr>
            <tr id="3dropDown" class="dropdown">
                <td colspan = 2>Details: <br>
                    <p>Socket DB-53-1 isn't working. </p></td>
                <td colspan = 2>Updates: <br>
                    <p id="3updates">02/12/2022: Fuse blown in socket, ordered new fuse. <br></p>
                </td>
            </tr>

            <tr id="4listing" class="listing">
                <td class="imgTd"><img src="" alt="No image supplied."></td>
                <td class="textTd">Fault ID: <p>354706</p><br>Building: <p>NEWSCI - New Science Building</p><br>Room: <p>0.06</p></td>
                <td class="textTd">Fault Type: <p>Lighting</p><br>Date: <p>08/12/2022</p><br>Assigned To: <p id="4assigned">Susie Stevens</p><br>Status: <p>Completed</p></td>
                <td class="buttonTd">
                    <button onclick="editForm(4)" id="4editButton" class="popupButton">Edit Job</button><br>
                    <button onclick="assignForm(4)" id="4assignButton" class="popupButton">Assign Job</button><br>
                    <button onclick="updateForm(4)" id="4updateButton" class="popupButton">Update Job</button><br>
                    <button onclick="dropDown(4)" id="4dropDownButton" class="popupButton">DropDown</button><br>
                </td>
            </tr>
            <tr id="4dropDown" class="dropdown">
                <td colspan = 2>Details: <br>
                    <p>Lighting panel towards the back-right of the room is no longer working.</p></td>
                <td colspan = 2>Updates: <br>
                    <p id="4updates">10/12/2022: new set of strip lights ordered.<br></p>
                </td>
            </tr>

            <tr id="5listing" class="listing">
                <td class="imgTd"><img src="" alt="No image supplied."></td>
                <td class="textTd">Fault ID: <p>354708</p><br>Building: <p>NEWSCI - New Science Building</p><br>Room: <p>0.06</p></td>
                <td class="textTd">Fault Type: <p>Furniture</p><br>Date: <p>10/12/2022</p><br>Assigned To: <p id="5assigned">Unassigned</p><br>Status: <p>Unassigned</p></td>
                <td class="buttonTd">
                    <button onclick="editForm(5)" id="5editButton" class="popupButton">Edit Job</button><br>
                    <button onclick="assignForm(5)" id="5assignButton" class="popupButton">Assign Job</button><br>
                    <button onclick="updateForm(5)" id="5updateButton" class="popupButton">Update Job</button><br>
                    <button onclick="dropDown(5)" id="5dropDownButton" class="popupButton">DropDown</button><br>
                </td>
            </tr>
            <tr id="5dropDown" class="dropdown">
                <td colspan = 2>Details: <br>
                    <p>Leak in ceiling.</p></td>
                <td colspan = 2>Updates: <br>
                    <p id="5updates">10/11/2022: new pipe fixture needed, awaiting delivery.<br></p>
                </td>
            </tr>
        </table>





<!--        POP UP FORMS    -->
        <div class="popup" id="assignPopup">
            <form class="popupForm" id="assignForm" onsubmit="return false">
                <span class="close" onclick="closePopups()">&times;</span>
                <h3>Assign job:</h3>
                <label for="assignField"></label>
                <input type="text" placeholder="Enter name..." id="assignField" list="staffList" required>
                <br>
                <button class="btn" onclick="assignJob()">Assign</button>
            </form>
        </div>

        <div class="popup" id="updatePopup">
            <form class="popupForm" id="updateForm" onsubmit="return false">
                <span class="close" onclick="closePopups()">&times;</span>
                <h3>Update job:</h3>
                <label for="updateField"></label>
                <textarea type="text" placeholder="Enter update..." id="updateField" cols="50" rows="3" required></textarea>
                <br>
                <button class="btn" onclick="updateJob()">Update</button>
            </form>
        </div>

        <div class="faultForm" id="editPopup">
            <form class="form-container" id="editForm" onsubmit="return false">
                <span class="close" onclick="closePopups()">&times;</span> <br>
                <label for="editFaultId"><b>Fault Id:</b></label>
                <input type="text" id="editFaultId" class="editInput">

                <label for="editBuilding"><b>Building:</b></label>
                <input type="text" id="editBuilding" list="buildingList" class="editInput" onchange=roomSuggestion()>

                <label for="editRoom"><b>Room:</b></label>
                <input type="text" id="editRoom" list="roomList" class="editInput">

                <label for="editType"><b>Fault Type:</b></label><br>
                <input name="fault-type" id="editType" list="typeList" class="editInput">

                <label for="editDate"><b>Date:</b></label>
                <input type="date" id="editDate" class="editInput">

                <label for="editAssigned"><b>Assigned To:</b></label>
                <input type="text" id="editAssigned" list="staffList" class="editInput">

                <label for="editStatus"><b>Status:</b></label>
                <input type="text" id="editStatus" list="statusList" class="editInput">

                <label for="editDetails"><b>Details</b></label>
                <textarea id="text-area" id="editDetails" class="editInput" cols="50" rows="2"></textarea>

                <label for="editUpdates"><b>Updates</b></label>
                <textarea id="text-area" id="editUpdates" class="editInput" cols="50" rows="3"></textarea>

                <button type="submit" class="btn" onclick="editJob()">Submit</button>
                <button type="button" class="btn cancel" onclick="closePopups()">Cancel</button>
            </form>
        </div>

        <div class="popup" id="settings">
            <h2>Settings</h2>
            <span class="close" onclick="closePopups()">&times;</span> <br>
            <p><b>Colourblind Mode</b></p>
            <input type="radio" id="cbOff" name="cbRadio" checked><label for="cbOff">Off (default)</label><br>
            <input type="radio" id="cbOn" name="cbRadio"><label for="cbOn">On</label><br>

            <br><p><b>Font Size</b></p>
            <label>
                <input type="range" id="fontSizeSlider" min="9" max="36" value="18" onchange="fontSizeDisplay()">
            </label>
            <p id="fontSizeDisplay">Font size: </p>
        </div>
    </div>






    <!--  Lists!  -->
    <datalist id="buildingList">
        <option value="ARTS 1 - Arts Building 1">
        <option value="ARTS 2 - Arts Building 2">
        <option value="BDS - Blackdale Building">
        <option value="C.HALL - Congregation Hall">
        <option value="MUS - Music Centre">
        <option value="DRA - Drama Studio">
        <option value="ECB - Edith Cavell Building">
        <option value="EFRY - Elizabeth Fry Building">
        <option value="EH - Earlham Hall">
        <option value="ITCS - Information Technology and Computing Services">
        <option value="JSC - Julian Study Centre">
        <option value="LIB - The Library">
        <option value="LSB - Lawrence Stenhouse Building">
        <option value="LT - Lecture Theatre Block">
        <option value="NEWSCI - New Science Building">
        <option value="QUEENS - Queens Building">
        <option value="REG - The Registry and Council Chamber">
        <option value="SP - Sportspark">
        <option value="TEC - The Enterprise Centre">
        <option value="TPSC - Thomas Paine Study Centre">
        <option value="UH - Union House">
        <option value="ZICER - Zuckerman Institute for Connective Environmental Research">
        <option value="CCEN - Careers Centre">
        <option value="SCVA - Sainsbury Centre for Visual Arts">
    </datalist>

    <datalist id="roomList"></datalist>

    <datalist id="statusList">
        <option value="Low Priority">
        <option value="Medium Priority">
        <option value="High Priority">
        <option value="Complete">
        <option value="Unassigned">
    </datalist>

    <datalist id="typeList">
        <option value="Furniture">
        <option value="Electrical">
        <option value="Plumbing">
        <option value="Structural">
        <option value="Lighting">
        <option value="Desktop (including peripherals)">
        <option value="Other (please specify)">
    </datalist>

    <datalist id="staffList">
        <option value="Kirsten Fickstings">
        <option value="Susie Stevens">
        <option value="Joe Hear">
        <option value="Unassigned">
    </datalist>
</body>
</html>